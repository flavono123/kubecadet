<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LFCS ì‹œí—˜ ì™„ë²½ ì •ë¦¬</title>
    <style>
      @media print {
        body {
          margin: 0;
          padding: 10px;
          font-size: 9pt;
        }
        .page-break {
          page-break-before: always;
        }
        h1 {
          font-size: 16pt;
          margin: 5px 0;
        }
        h2 {
          font-size: 12pt;
          margin: 4px 0;
        }
        h3 {
          font-size: 10pt;
          margin: 3px 0;
        }
      }

      body {
        font-family: "Courier New", monospace;
        line-height: 1.3;
        max-width: 100%;
        margin: 0 auto;
        padding: 10px;
        font-size: 10px;
      }

      h1 {
        background: #2c3e50;
        color: white;
        padding: 8px;
        margin: 10px 0 5px 0;
        font-size: 16px;
      }

      h2 {
        background: #34495e;
        color: white;
        padding: 5px;
        margin: 8px 0 4px 0;
        font-size: 13px;
      }

      h3 {
        color: #2c3e50;
        border-bottom: 2px solid #2c3e50;
        padding-bottom: 2px;
        margin: 6px 0 3px 0;
        font-size: 11px;
      }

      pre,
      code {
        background: #f4f4f4;
        border: 1px solid #ddd;
        padding: 3px;
        font-family: "Courier New", monospace;
        font-size: 9px;
      }

      pre {
        overflow-x: auto;
        margin: 3px 0;
        padding: 5px;
      }

      table {
        border-collapse: collapse;
        width: 100%;
        margin: 5px 0;
        font-size: 9px;
      }

      th,
      td {
        border: 1px solid #ddd;
        padding: 3px;
        text-align: left;
      }

      th {
        background: #34495e;
        color: white;
      }

      .two-col {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }

      .section {
        margin-bottom: 8px;
      }

      .highlight {
        background: #ffffcc;
        padding: 2px 4px;
      }

      .tip {
        background: #e8f5e9;
        border-left: 3px solid #4caf50;
        padding: 4px;
        margin: 4px 0;
      }

      .warning {
        background: #ffebee;
        border-left: 3px solid #f44336;
        padding: 4px;
        margin: 4px 0;
      }
    </style>
  </head>
  <body>
    <h1>ğŸ“ LFCS ì‹œí—˜ ì™„ë²½ ì •ë¦¬ ì¹˜íŠ¸ì‹œíŠ¸</h1>

    <div class="two-col">
      <div>
        <h2>ğŸ“Š ì‹œìŠ¤í…œ ì •ë³´</h2>
        <pre>
# ì»¤ë„
uname -r              # ì»¤ë„ ë²„ì „
sysctl parameter      # ì»¤ë„ íŒŒë¼ë¯¸í„°

# íƒ€ì„ì¡´
timedatectl show -p Timezone --value
cat /etc/timezone
        </pre>

        <h2>â° Cron</h2>
        <pre>
# System-wide
/etc/crontab
/etc/cron.d/

# ì‚¬ìš©ì
crontab -e                    # í¸ì§‘
sudo crontab -u user -e       # íŠ¹ì • ìœ ì €

# ì‹œê°„ í˜•ì‹: ë¶„ ì‹œ ì¼ ì›” ìš”ì¼
15 11 * * 1,4        # ì›”,ëª© 11:15
15 11 * * 1-4        # ì›”~ëª© 11:15
30 20 * * *          # ë§¤ì¼ 20:30
        </pre>

        <h2>â±ï¸ NTP (systemd-timesyncd)</h2>
        <pre>
# /etc/systemd/timesyncd.conf
[Time]
NTP=0.pool.ntp.org 1.pool.ntp.org
FallbackNTP=ntp.ubuntu.com
PollIntervalMaxSec=1000
ConnectionRetrySec=20

systemctl restart systemd-timesyncd
man timesyncd.conf  # ì˜µì…˜ í™•ì¸!
        </pre>

        <h2>ğŸ‘¥ ì‚¬ìš©ì/ê·¸ë£¹</h2>
        <pre>
# ìƒì„±
useradd -m -d /path -g primary -G sec -s /bin/bash user
groupadd groupname
passwd username

# ìˆ˜ì •
usermod -g group user        # primary ê·¸ë£¹
usermod -m -d /new/home user # í™ˆ ì´ë™
usermod -G grp1,grp2 user    # secondary
chown -R user:group /path

# í™•ì¸
id username
grep user /etc/passwd
        </pre>

        <h2>ğŸ” sudo</h2>
        <pre>
# í¸ì§‘
sudo visudo
sudo visudo -f /etc/sudoers.d/file
sudo EDITOR=vim visudo

# í˜•ì‹
user  ALL=(ALL) NOPASSWD: /path/cmd
%grp  ALL=(ALL) NOPASSWD: ALL

# í™•ì¸
sudo -l -U username
        </pre>

        <h2>ğŸ”’ ë¦¬ì†ŒìŠ¤ ì œí•œ</h2>
        <pre>
# /etc/security/limits.conf
# domain  type  item       value
jackie    hard  nproc      100
@ops      -     maxlogins  1
*         hard  nofile     1024

# í™•ì¸
ulimit -Su  # soft
ulimit -Hu  # hard
ulimit -a   # ì „ì²´
        </pre>

        <h2>ğŸ” find</h2>
        <pre>
# ì‹œê°„
find . -newermt '2020-01-01'    # ì´í›„
find . ! -newermt '2020-01-01'  # ì´ì „
find . -mtime +30               # 30ì¼ ì „
find . -mtime -7                # 7ì¼ ë‚´

# í¬ê¸°
find . -size -3k   # 3KB ë¯¸ë§Œ
find . -size +10k  # 10KB ì´ˆê³¼

# ê¶Œí•œ
find . -perm 777   # ì •í™•íˆ 777

# ì‹¤í–‰
find . -type f -name "*.log" -delete
find . -size +10k -exec mv {} dir/ \;
find . -maxdepth 1 -type f ...
        </pre>
      </div>

      <div>
        <h2>ğŸ“ grep / sed / awk</h2>
        <pre>
# grep (í•„í„°ë§)
grep 'pattern' file
grep -E 'regex' file           # í™•ì¥ ì •ê·œì‹
grep 'p1' f | grep 'p2'        # AND

# sed (êµì²´)
sed 's/old/new/g' file         # ëª¨ë‘ êµì²´
sed -i 's/old/new/g' file      # íŒŒì¼ ìˆ˜ì •
sed 's/^start.*end$/rep/' f    # ì •ê·œì‹

# awk (í•„ë“œ ì²˜ë¦¬)
awk '{print $1, $3}' file
awk '/pat1/ && /pat2/' file    # AND
awk '$1 > 100' file            # ì¡°ê±´
awk -F: '{print $1}' file      # êµ¬ë¶„ì

# nginx ë¡œê·¸ ì˜ˆì‹œ
awk '$7 ~ /^"GET \/app/ && $(NF-1) ~ /"bot"/' log
        </pre>

        <h2>ğŸ’¾ íŒŒì¼ì‹œìŠ¤í…œ</h2>
        <pre>
# í¬ë§·
mkfs.ext4 /dev/vdb
mkfs.xfs /dev/vdc

# ë§ˆìš´íŠ¸
mkdir -p /mnt/point
mount /dev/vdb /mnt/point

# /etc/fstab (ì˜êµ¬)
/dev/vdb  /mnt/point  ext4  defaults  0  2

# í™•ì¸
df -h
lsblk
mount | grep vdb
        </pre>

        <h2>ğŸ“¦ LVM</h2>
        <pre>
# PV â†’ VG â†’ LV â†’ FS

# Physical Volume
pvcreate /dev/vdh
pvs
pvdisplay /dev/vdh         # Allocated PE=0 í™•ì¸!
pvmove /dev/vdh            # ë°ì´í„° ì´ë™

# Volume Group
vgcreate vol2 /dev/vdh
vgs
vgreduce vol1 /dev/vdh     # PV ì œê±°
vgextend vol2 /dev/vdi     # PV ì¶”ê°€

# Logical Volume
lvcreate -L 50M -n p1 vol2
lvs
lvextend -L +10G /dev/vol2/p1
lvremove /dev/vol2/p1

# í¬ë§·
mkfs.ext4 /dev/vol2/p1
        </pre>

        <h2>ğŸ“¦ ì••ì¶•</h2>
        <pre>
# ì••ì¶• í•´ì œ
tar -xzf file.tar.gz    # gzip
tar -xjf file.tar.bz2   # bzip2
tar -xJf file.tar.xz    # xz

# ë‚´ìš© ë³´ê¸°
tar -tzf file.tar.gz | sort > list.txt
tar -tjf file.tar.bz2 | sort > list.txt

# ì¬ì••ì¶• (bz2â†’gz, ìµœê³  ì••ì¶•)
bzcat file.tar.bz2 | gzip -9 > file.tar.gz
        </pre>

        <h2>ğŸŒ iptables</h2>
        <pre>
# í¬íŠ¸ ì°¨ë‹¨
iptables -A INPUT -p tcp --dport 5000 -j DROP

# ë¦¬ë‹¤ì´ë ‰íŠ¸
iptables -t nat -A PREROUTING -p tcp \
  --dport 6000 -j REDIRECT --to-port 6001

# íŠ¹ì • IPë§Œ í—ˆìš©
iptables -A INPUT -p tcp -s 192.168.10.80 \
  --dport 6002 -j ACCEPT
iptables -A INPUT -p tcp --dport 6002 -j DROP

# ë‚˜ê°€ëŠ” íŠ¸ë˜í”½ ì°¨ë‹¨
iptables -A OUTPUT -d 192.168.10.70 -j DROP

# í™•ì¸ ë° ì €ì¥
iptables -L -n -v
iptables-save > /etc/iptables/rules.v4
        </pre>
      </div>
    </div>

    <div class="page-break"></div>

    <div class="two-col">
      <div>
        <h2>ğŸ” SSH ì„œë²„</h2>
        <pre>
# /etc/ssh/sshd_config

# ì „ì—­ ì„¤ì •
X11Forwarding no
PasswordAuthentication no
Banner /etc/ssh/sshd-banner

# ì‚¬ìš©ìë³„ (Match ë¸”ë¡)
Match User marta
    PasswordAuthentication yes
    Banner /etc/ssh/sshd-banner

Match User cilla
    Banner /etc/ssh/sshd-banner

Match all  # í•„ìˆ˜!

# í…ŒìŠ¤íŠ¸ ë° ì¬ì‹œì‘
sshd -t
systemctl restart ssh      # Debian/Ubuntu
systemctl restart sshd     # RHEL/CentOS

# í™•ì¸
sudo -l -U username
        </pre>

        <h2>ğŸŒ ì›ê²© íŒŒì¼ì‹œìŠ¤í…œ</h2>
        <h3>SSHFS</h3>
        <pre>
apt-get install sshfs
sed -i 's/#user_allow_other/user_allow_other/' /etc/fuse.conf
sshfs -o allow_other,rw user@host:/path /mount/point
        </pre>

        <h3>NFS ì„œë²„</h3>
        <pre>
# /etc/exports
/nfs/share 192.168.10.0/24(ro,sync,no_subtree_check)

exportfs -a
systemctl restart nfs-server
showmount -e
        </pre>

        <h3>NFS í´ë¼ì´ì–¸íŠ¸</h3>
        <pre>
mount -t nfs server:/nfs/share /mount/point

# /etc/fstab
server:/nfs/share /mnt nfs ro,_netdev 0 0
        </pre>

        <h2>ğŸ”§ Nginx ë¡œë“œë°¸ëŸ°ì„œ</h2>
        <pre>
# /etc/nginx/conf.d/lb.conf

upstream backend_pool {
    server 192.168.10.60:1111;
    server 192.168.10.60:2222;
    # random;  # ëœë¤ ì•Œê³ ë¦¬ì¦˜
}

server {
    listen 8000;
    location / {
        proxy_pass http://backend_pool;
    }
}

server {
    listen 8001;
    location / {
        proxy_pass http://192.168.10.60:2222/special;
    }
}

# í…ŒìŠ¤íŠ¸ ë° ì¬ì‹œì‘
nginx -t
systemctl restart nginx
        </pre>
      </div>

      <div>
        <h2>ğŸ“¦ ì†ŒìŠ¤ ì»´íŒŒì¼</h2>
        <pre>
# ì••ì¶• í•´ì œ
tar -xjf links-2.14.tar.bz2
cd links-2.14

# ì˜µì…˜ í™•ì¸ (ì¤‘ìš”!)
./configure --help
./configure --help | grep -i prefix
./configure --help | grep -i ipv6
cat README
cat INSTALL

# ì»´íŒŒì¼ ë° ì„¤ì¹˜
./configure --prefix=/usr --disable-ipv6
make
make install

# í™•ì¸
which links
links --version
        </pre>

        <h2>ğŸ”§ vim ì—ë””í„° ì„¤ì •</h2>
        <pre>
# ~/.bashrcì— ì¶”ê°€
export EDITOR=vim
export VISUAL=vim
export SUDO_EDITOR=vim

source ~/.bashrc

# Git
git config --global core.editor "vim"

# ì‹œìŠ¤í…œ ì „ì²´ (Debian/Ubuntu)
update-alternatives --config editor
        </pre>

        <h2>ğŸ“‚ ì¤‘ìš” íŒŒì¼ ìœ„ì¹˜</h2>
        <pre>
# ì‹œìŠ¤í…œ
/etc/passwd              # ì‚¬ìš©ì
/etc/group               # ê·¸ë£¹
/etc/fstab               # ë§ˆìš´íŠ¸
/etc/crontab             # System cron
/etc/security/limits.conf # ë¦¬ì†ŒìŠ¤ ì œí•œ

# ë„¤íŠ¸ì›Œí¬
/etc/ssh/sshd_config     # SSH ì„œë²„
/etc/exports             # NFS
/etc/systemd/timesyncd.conf # NTP

# ì„œë¹„ìŠ¤
/etc/nginx/conf.d/       # Nginx
/etc/sudoers             # sudo
/etc/sudoers.d/          # sudo ì¶”ê°€

# ë¡œê·¸
/var/log/syslog
/var/log/auth.log
/var/log/nginx/
        </pre>

        <h2>ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</h2>
        <pre>
# ì„œë¹„ìŠ¤ ë¬¸ì œ
systemctl status service
journalctl -u service
tail -f /var/log/syslog

# ë¬¸ë²• ì²´í¬
nginx -t
sshd -t
visudo -c

# í¬íŠ¸ í™•ì¸
netstat -tlnp | grep :8000
ss -tlnp | grep :8000
lsof -i :8000

# ê¶Œí•œ
ls -la /path
chown -R user:group /path
chmod 755 /path
        </pre>
      </div>
    </div>

    <h2>âš¡ ì‹œí—˜ íŒ</h2>
    <div class="two-col">
      <div class="tip">
        <strong>âœ… DO (í•´ì•¼ í•  ê²ƒ)</strong>
        <ul style="margin: 5px 0; padding-left: 20px">
          <li>í•­ìƒ ë°±ì—…: <code>cp file file.backup</code></li>
          <li>ë¬¸ë²• ì²´í¬: <code>nginx -t</code>, <code>sshd -t</code></li>
          <li>man page í™œìš©: <code>man command</code></li>
          <li>í˜„ì¬ ìƒíƒœ í™•ì¸ ë¨¼ì €</li>
          <li>ìƒˆ í„°ë¯¸ë„ì—ì„œ í…ŒìŠ¤íŠ¸</li>
          <li>ìš”êµ¬ì‚¬í•­ì— ì—†ìœ¼ë©´ ì¶”ê°€ X</li>
        </ul>
      </div>

      <div class="warning">
        <strong>âŒ DON'T (í•˜ì§€ ë§ ê²ƒ)</strong>
        <ul style="margin: 5px 0; padding-left: 20px">
          <li><code>/etc/passwd</code> ì§ì ‘ í¸ì§‘ (usermod ì‚¬ìš©)</li>
          <li><code>vi /etc/sudoers</code> (visudo ì‚¬ìš©)</li>
          <li>ì¬ì‹œì‘ ì „ ë¬¸ë²• ì²´í¬ ì•ˆ í•¨</li>
          <li>í˜„ì¬ SSH ì„¸ì…˜ë§Œìœ¼ë¡œ í…ŒìŠ¤íŠ¸</li>
          <li>ê³¼ë„í•œ ì„¤ì •</li>
        </ul>
      </div>
    </div>

    <h2>ğŸ“‹ í•µì‹¬ ëª…ë ¹ì–´ ìš”ì•½ í…Œì´ë¸”</h2>
    <table>
      <tr>
        <th>ì¹´í…Œê³ ë¦¬</th>
        <th>ëª…ë ¹ì–´</th>
        <th>ìš©ë„</th>
        <th>í•µì‹¬ ì˜µì…˜</th>
      </tr>
      <tr>
        <td>ì‹œìŠ¤í…œ</td>
        <td>uname, sysctl, timedatectl</td>
        <td>ì‹œìŠ¤í…œ ì •ë³´</td>
        <td>-r, -a, show</td>
      </tr>
      <tr>
        <td>ì‚¬ìš©ì</td>
        <td>useradd, usermod, passwd</td>
        <td>ì‚¬ìš©ì ê´€ë¦¬</td>
        <td>-m, -g, -G, -s</td>
      </tr>
      <tr>
        <td>ê²€ìƒ‰</td>
        <td>find, grep, sed, awk</td>
        <td>íŒŒì¼/í…ìŠ¤íŠ¸</td>
        <td>-name, -size, -exec, -E</td>
      </tr>
      <tr>
        <td>ë””ìŠ¤í¬</td>
        <td>mkfs, mount, pvcreate, vgcreate, lvcreate</td>
        <td>íŒŒì¼ì‹œìŠ¤í…œ/LVM</td>
        <td>-L, -n, -g</td>
      </tr>
      <tr>
        <td>ë„¤íŠ¸ì›Œí¬</td>
        <td>iptables, sshfs, exportfs</td>
        <td>ë°©í™”ë²½/ì›ê²©FS</td>
        <td>-A, -t nat, -o</td>
      </tr>
      <tr>
        <td>ì„œë¹„ìŠ¤</td>
        <td>systemctl, nginx, sshd</td>
        <td>ì„œë¹„ìŠ¤ ê´€ë¦¬</td>
        <td>restart, status, -t</td>
      </tr>
    </table>

    <div
      style="
        text-align: center;
        margin-top: 20px;
        padding: 10px;
        background: #2c3e50;
        color: white;
      "
    >
      <strong>ğŸ¯ Good Luck on LFCS! ğŸš€</strong><br />
      <em>Ctrl+Pë¡œ PDF ì €ì¥ | ì—¬ë°±: ìµœì†Œ | ë°°ê²½ ê·¸ë˜í”½: ì¼œê¸°</em>
    </div>
  </body>
</html>
